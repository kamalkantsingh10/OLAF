# Story 6.3: ODrive Motor Controller Setup and Configuration

## Status
Ready for Review

## Story
**As a** hardware builder,
**I want** ODrive motor controller integrated and configured for hoverboard motors,
**so that** I can control motor speed and direction via UART.

## Acceptance Criteria

[Full acceptance criteria from Epic 6 document]

## Dependencies
- Story 6.2: Motors mounted

## Estimated Effort
8-10 hours

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References
N/A - Interactive testing session, no formal debug log

### Completion Notes List
- ODrive v3.6 successfully connected (Firmware 0.5.1, 40.5V power)
- Hall effect sensors confirmed working on both axes (reading states correctly)
- Motor phase wires connected and verified
- **Critical Fix:** Increased `resistance_calib_max_voltage` from 2V to 12V for low-resistance hoverboard motors
- Motor calibration successful:
  - Axis 0: Phase resistance 0.2566Œ©, Inductance 540.56¬µH
  - Axis 1: Phase resistance 0.2961Œ©, Inductance 660.79¬µH
- Hall encoder calibration successful (both encoders ready)
- Velocity control tested and working:
  - Axis 0: Commanded 2 rev/s ‚Üí Actual 1.97/2.01 rev/s (excellent tracking)
  - Axis 1: Commanded 2 rev/s ‚Üí Actual 2.00/2.04 rev/s (excellent tracking)
- Configuration saved to ODrive non-volatile memory
- UART configured for ESP32 integration (115200 baud, GPIO1/GPIO2)
- ESP32 control examples documented (UART protocol, differential drive, PID integration)

### File List
- **`tools/diagnostics/odrive_test_and_calibrate.py`** - ‚≠ê Calibration script (test & calibrate motors)
- **`tools/diagnostics/odrive_demo.py`** - üéÆ Demo script (5 motor movement demos)
- `tools/diagnostics/README.md` - Quick start guide + ESP32 control instructions
- `tools/diagnostics/QUICK_START.md` - Super simple 2-script guide
- `tools/diagnostics/odrive_wiring_guide.md` - Hardware wiring reference

## QA Results
<!-- To be filled by QA agent -->

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-30 | v1.0 | Initial story creation from Epic 6 | John (Product Manager) |
| 2025-11-30 | v1.1 | ODrive calibration completed, both motors working | Gilfoyle Bertram (Dev Agent) |
