# Story 3.11: Epic 3 Documentation & Build-in-Public Content

## Status
Draft

## Story
**As a** future contributor or follower,
**I want** comprehensive Epic 3 documentation and build-in-public content,
**so that** I can replicate the head assembly and follow the journey.

## Acceptance Criteria

1. **Technical Documentation:**
   - `firmware/head/README.md` updated:
     - Presence sensor integration
     - Updated I2C register map (0x20-0x23)
     - Firmware build/upload process
   - `firmware/ears_neck/README.md` created:
     - Dual UART servo controller architecture
     - Servo ID mappings (1-7)
     - I2C register map (0x10-0x32)
     - Kinematics reference
     - Gesture definitions
   - `ros2/src/orchestrator/ros2_nodes/README.md` updated:
     - Ears+Neck driver usage
     - Coordinated expression API
     - Presence detection topics
     - Example commands for all 7 emotions

2. **Hardware Documentation:**
   - BOM: `hardware/bom/epic3_bom.csv`
     - ESP32-S3 (Ears+Neck module)
     - 4Ã— Feetech SCS0009 servos
     - 3Ã— Feetech STS3215 servos
     - 2Ã— Bus servo controllers
     - DFRobot SEN0395 presence sensor
     - General purpose PCB (2Ã— perfboards)
     - M3/M4 screws, standoffs
     - 3D printed parts list with print times
     - Supplier links, costs
   - Wiring diagrams:
     - `hardware/wiring/head-module-pcb-diagram.png` (eyes + presence sensor)
     - `hardware/wiring/ears-servo-wiring.png` (4 servos + controller)
     - `hardware/wiring/neck-gimbal-wiring.png` (3 servos + controller + ESP32)
     - `hardware/wiring/full-head-i2c-diagram.png` (both ESP32s, I2C routing to torso)

3. **Assembly Guides:**
   - `hardware/assembly/head-assembly-guide.md`:
     - Step-by-step instructions with photos
     - 3D printing tips (settings, post-processing)
     - PCB soldering procedure
     - Servo calibration procedure
     - Cable management best practices
     - Troubleshooting common issues

4. **Photos/Videos:**
   - Photos:
     - 3D printed parts laid out (before assembly)
     - Head Module PCB (soldered, close-up)
     - Ears+Neck Module PCB (soldered, close-up)
     - Ear servo assembly (close-up of 2-DOF mechanism)
     - Neck gimbal assembly (all 3 axes visible)
     - Complete head assembly (multiple angles: front, side, 3/4, back)
     - Eyes + ears + neck coordinated expression (happy, sad, curious)
   - Videos:
     - 30-second time-lapse of assembly process
     - 1-minute demo: All 7 emotions cycling
     - 15-second clip: Presence detection reaction (person approaches â†’ curious expression)
     - 20-second clip: Gesture showcase (look-left, nod-yes, shake-no)

5. **GitHub Milestone:**
   - Milestone "Epic 3: Complete Head Assembly" created
   - All stories (3.1-3.11) closed and linked
   - Milestone marked complete
   - Release tag: `v0.3.0-epic3-head-assembly`

6. **Build-in-Public Content:**
   - **LinkedIn Post:** "Olaf's Personality Comes Alive! ðŸ¤–âœ¨"
     - Photo carousel: Eyes, ears, neck in different expressions
     - Explanation: "After 3-4 weeks of building, Olaf can now express emotions through coordinated eyes, ears, and neck movements. 7 servos, 2 ESP32s, and a lot of kinematics later... he's got personality!"
     - Technical depth: Multi-modal expression coordination, 3-DOF neck gimbal, presence detection
     - GitHub link to Epic 3 documentation
   - **Optional Reddit Post (r/robotics):**
     - Title: "Built a 3-DOF Neck Gimbal + Articulated Ears for Expressive Robot Head"
     - Content: Assembly process, challenges (cable routing, servo calibration), results (coordinated expressions)
     - GIF: Head looking left/right with ears following
     - Link to GitHub repo and build guide

7. **Troubleshooting Guide:**
   - `docs/troubleshooting-epic3.md`:
     - "Ears not moving" â†’ Check UART1 wiring, servo IDs
     - "Neck servo stalling under head weight" â†’ Verify STS3215 torque settings, check for binding
     - "ESP32 0x09 not detected on I2C" â†’ Verify address configuration, check wiring
     - "Jerky servo movement" â†’ Adjust motion profile easing, check power supply voltage sag
     - "Presence sensor not detecting" â†’ Check GPIO16 wiring, test with serial monitor
     - "Eyes and ears out of sync" â†’ Verify ROS2 coordinated_expression timing
     - "I2C bus conflicts" â†’ Check addresses 0x08 and 0x09 unique

## Tasks / Subtasks

- [ ] **Task 1: Update firmware documentation** (AC: 1)
  - [ ] Update `firmware/head/README.md`:
    - [ ] Add presence sensor section (GPIO16, registers 0x20-0x23)
    - [ ] Update I2C register map table
    - [ ] Add autonomous mode usage
  - [ ] Create `firmware/ears_neck/README.md`:
    - [ ] Dual UART architecture diagram
    - [ ] Servo ID mapping table (1-7)
    - [ ] I2C register map (0x10-0x32)
    - [ ] Kinematics equations (optional)
    - [ ] Gesture definitions with parameters
    - [ ] Build and upload instructions

- [ ] **Task 2: Update ROS2 documentation** (AC: 1)
  - [ ] Update `ros2_nodes/README.md`:
    - [ ] Add ears_neck_driver section
      - [ ] Topics: /olaf/ears/position, /olaf/neck/position, /olaf/gesture
      - [ ] Message types
      - [ ] Example commands
    - [ ] Add coordinated_expression section
      - [ ] Topic: /olaf/expression/set
      - [ ] Emotion types: neutral, happy, curious, thinking, confused, sad, excited
      - [ ] Example commands for each emotion
    - [ ] Add presence detection section
      - [ ] Topics: /olaf/head/presence, /olaf/events/presence_detected
      - [ ] Usage examples

- [ ] **Task 3: Create hardware BOM** (AC: 2)
  - [ ] Create `hardware/bom/epic3_bom.csv`:
    - [ ] List all components with quantities
    - [ ] Add costs (per unit and total)
    - [ ] Add supplier links (AliExpress, Adafruit, etc.)
    - [ ] Include 3D printing filament usage
    - [ ] Calculate total Epic 3 cost

- [ ] **Task 4: Create wiring diagrams** (AC: 2)
  - [ ] Create `hardware/wiring/head-module-pcb-diagram.png`:
    - [ ] Schematic: ESP32 â†’ 2Ã— GC9A01, DFRobot SEN0395
    - [ ] Pin labels, connections
  - [ ] Create `hardware/wiring/ears-servo-wiring.png`:
    - [ ] 4 servos daisy-chained to controller
    - [ ] Controller â†’ ESP32 UART1
  - [ ] Create `hardware/wiring/neck-gimbal-wiring.png`:
    - [ ] 3 servos daisy-chained to controller
    - [ ] Controller â†’ ESP32 UART2
    - [ ] ESP32 I2C to torso
  - [ ] Create `hardware/wiring/full-head-i2c-diagram.png`:
    - [ ] Both ESP32s (0x08, 0x09)
    - [ ] I2C cables routing through neck to torso
    - [ ] Overall system architecture

- [ ] **Task 5: Create assembly guide** (AC: 3)
  - [ ] Create `hardware/assembly/head-assembly-guide.md`:
    - [ ] Introduction: Overview of Epic 3 assembly
    - [ ] Prerequisites: Tools, components, skills needed
    - [ ] Section 1: 3D Printing (refer to Story 3.1)
      - [ ] Print settings
      - [ ] Post-processing
    - [ ] Section 2: Head Module PCB (refer to Story 3.2)
      - [ ] PCB layout
      - [ ] Soldering procedure
      - [ ] Testing
    - [ ] Section 3: Ear Servos (refer to Story 3.3)
      - [ ] Mechanical assembly
      - [ ] Servo ID configuration
    - [ ] Section 4: Neck Gimbal + Ears/Neck PCB (refer to Story 3.4)
      - [ ] Gimbal assembly
      - [ ] PCB soldering
      - [ ] Cable routing
    - [ ] Section 5: Testing (refer to Story 3.10)
      - [ ] Functional tests
      - [ ] 30-minute stability test
    - [ ] Troubleshooting section
    - [ ] Photos for each step

- [ ] **Task 6: Capture photos** (AC: 4)
  - [ ] 3D printed parts:
    - [ ] All parts laid out before assembly
    - [ ] Parts organized by subsystem (head, ears, neck)
  - [ ] PCBs:
    - [ ] Head Module PCB (top and bottom views)
    - [ ] Ears+Neck Module PCB (top and bottom views)
    - [ ] Close-ups of solder joints
  - [ ] Mechanical assembly:
    - [ ] Ear servo assembly (close-up showing 2-DOF mechanism)
    - [ ] Neck gimbal (showing all 3 axes)
  - [ ] Complete head:
    - [ ] Front view
    - [ ] Side view
    - [ ] 3/4 view
    - [ ] Back view (showing cable routing)
  - [ ] Expressions:
    - [ ] Happy (eyes bright, ears up, head tilt up)
    - [ ] Sad (eyes droop, ears down, head tilt down)
    - [ ] Curious (eyes wide, ears asymmetric, head tilt+roll)

- [ ] **Task 7: Record videos** (AC: 4)
  - [ ] Assembly time-lapse:
    - [ ] 30 seconds showing key steps
    - [ ] Parts â†’ PCB â†’ Servos â†’ Final assembly
  - [ ] Emotion demo:
    - [ ] 1 minute cycling through all 7 emotions
    - [ ] Clear view of eyes, ears, neck coordinating
  - [ ] Presence detection:
    - [ ] 15 seconds: Person approaches â†’ curious expression
    - [ ] Show before (neutral) and after (curious)
  - [ ] Gesture showcase:
    - [ ] 20 seconds: look-left, nod-yes, shake-no gestures
    - [ ] Smooth coordinated movements

- [ ] **Task 8: Create GitHub milestone and release** (AC: 5)
  - [ ] Create milestone: "Epic 3: Complete Head Assembly"
  - [ ] Link all 11 stories (3.1-3.11) to milestone
  - [ ] Close all completed stories
  - [ ] Mark milestone as complete
  - [ ] Create git tag: `v0.3.0-epic3-head-assembly`
  - [ ] Push tag to GitHub
  - [ ] Optional: Create GitHub Release with:
    - [ ] Epic 3 summary
    - [ ] Key deliverables
    - [ ] Photos/videos
    - [ ] Link to documentation

- [ ] **Task 9: Create build-in-public content** (AC: 6)
  - [ ] **LinkedIn Post:**
    - [ ] Write post text (~300 words):
      - [ ] Hook: "Olaf's Personality Comes Alive!"
      - [ ] Story: 3-4 weeks of building, challenges overcome
      - [ ] Technical: 7 servos, 2 ESP32s, multi-modal coordination
      - [ ] Achievement: 7 emotions, presence detection, coordinated gestures
      - [ ] CTA: Link to GitHub, invite feedback
    - [ ] Select 3-5 photos for carousel:
      - [ ] Complete head assembly (hero shot)
      - [ ] Happy expression
      - [ ] Curious expression
      - [ ] Close-up of neck gimbal
      - [ ] Behind-the-scenes (PCBs, wiring)
    - [ ] Schedule post for optimal engagement time
  - [ ] **Reddit Post (optional):**
    - [ ] Select subreddit: r/robotics (best fit)
    - [ ] Write post:
      - [ ] Title: "Built a 3-DOF Neck Gimbal + Articulated Ears for Expressive Robot Head"
      - [ ] Body: Build process, challenges, results
      - [ ] Technical details: Servo specs, kinematics, ROS2 integration
    - [ ] Create GIF: Head looking left/right (5-10 seconds, looping)
    - [ ] Post link to GitHub repo and build guide
    - [ ] Monitor comments, respond to questions

- [ ] **Task 10: Create troubleshooting guide** (AC: 7)
  - [ ] Create `docs/troubleshooting-epic3.md`:
    - [ ] Introduction: Common issues and solutions
    - [ ] Hardware issues:
      - [ ] Ears not moving â†’ UART1 wiring, servo IDs
      - [ ] Neck stalling â†’ Torque settings, binding check
      - [ ] I2C not detected â†’ Address config, wiring
      - [ ] Presence sensor â†’ GPIO16, power supply
    - [ ] Software issues:
      - [ ] ROS2 nodes not starting â†’ Dependencies, build errors
      - [ ] Jerky movement â†’ Motion profiles, power supply
      - [ ] Out of sync â†’ ROS2 timing, I2C latency
    - [ ] Each issue includes:
      - [ ] Symptom description
      - [ ] Diagnostic steps
      - [ ] Solution
      - [ ] Prevention tips

- [ ] **Task 11: Final review and commit** (AC: all)
  - [ ] Review all documentation for completeness
  - [ ] Check spelling and grammar
  - [ ] Verify all links work
  - [ ] Ensure photos/videos uploaded to repo (or linked externally)
  - [ ] Commit all documentation:
    ```bash
    git add docs/ firmware/ hardware/ ros2/ tests/
    git commit -m "docs: complete Epic 3 documentation and build-in-public content"
    git push
    ```

## Dev Notes

### Documentation Philosophy

**Audience:**
- Primary: Future contributors wanting to replicate Olaf
- Secondary: Makers/hobbyists learning robot expressiveness
- Tertiary: Engineering community (for feedback and collaboration)

**Goals:**
1. Enable replication: Someone with moderate skills can build Epic 3 from docs
2. Share knowledge: Document challenges and solutions for community benefit
3. Build following: Create content that attracts contributors and users

**Style:**
- Clear, step-by-step instructions
- Photos for visual learners
- Troubleshooting for common pitfalls
- Technical depth for advanced users
- Accessible language for beginners

### BOM Cost Estimate (Epic 3 Only)

**Major Components:**
- ESP32-S3 (Ears+Neck): $5-10
- 4Ã— Feetech SCS0009 servos: $40-60 ($10-15 each)
- 3Ã— Feetech STS3215 servos: $60-90 ($20-30 each)
- 2Ã— Bus servo controllers: $20-30 ($10-15 each)
- DFRobot SEN0395: $15-25
- 2Ã— Perfboards: $5-10
- Screws, standoffs, wiring: $10-20
- 3D printing filament: $20-30 (PETG, ~500g)

**Total Epic 3 Cost:** ~$175-265 USD

**Note:** Epic 1 components (ESP32, 2Ã— GC9A01) already acquired (~$50)

### Wiring Diagram Best Practices

**Diagram Tools:**
- Fritzing (breadboard view for beginners)
- KiCad (schematic for advanced users)
- Draw.io (high-level system diagrams)

**Diagram Elements:**
- Clear component labels
- Pin numbers/names
- Wire colors (consistent across diagrams)
- Power supply connections
- Ground connections highlighted
- Signal direction arrows (TXâ†’RX, etc.)

### Assembly Guide Best Practices

**Photo Tips:**
- Good lighting (natural or LED panel)
- Clean workspace (no clutter in background)
- Multiple angles for 3D understanding
- Close-ups for critical details (solder joints, pin connections)
- In-progress shots (not just final result)

**Instruction Writing:**
- Imperative mood: "Connect the servo..." not "The servo should be connected..."
- One step per sentence
- Include expected outcomes: "The LED should light up green"
- Warn about common mistakes: "Note: Do not overtighten..."

### Build-in-Public Strategy

**LinkedIn Engagement Tips:**
- Post timing: Tuesday-Thursday, 9-11am EST (best engagement)
- Hashtags: #robotics #ROS2 #opensource #makermovement #AI #DIY
- Tag relevant accounts: @Anthropic (Claude mention), @RoboticsOrg, etc.
- Encourage comments: Ask questions like "What emotions should I add next?"

**Reddit Engagement Tips:**
- Be humble: "First time building a gimbal, learned a lot!"
- Be helpful: Respond to all questions, offer build tips
- Share code: Link to GitHub prominently
- Accept criticism: Community feedback valuable for Epic 9+

**Content Frequency:**
- LinkedIn: 1 post per epic (12 total for full project)
- Reddit: Optional, high-value epics only (Epic 3, 9, 13)
- Twitter/X: Short updates, GIFs (if desired)
- YouTube: Monthly summary videos (optional)

### Video Recording Tips

**Equipment:**
- Camera: Smartphone (4K preferred) or webcam
- Tripod or stable surface (avoid shaky footage)
- Lighting: Natural light or LED panel (avoid shadows)

**Time-Lapse:**
- Frame rate: 1 frame every 5-10 seconds
- Duration: 30 seconds final video
- Tools: OBS Studio, Lapse It (mobile), iMovie

**Emotion Demo:**
- Script: Cycle through emotions in order
- Camera angle: 3/4 view (shows eyes, ears, neck)
- Background: Plain, uncluttered
- Audio: Optional narration explaining each emotion

### File Organization

```
docs/
â”œâ”€â”€ troubleshooting-epic3.md            # <-- THIS STORY

hardware/
â”œâ”€â”€ assembly/
â”‚   â””â”€â”€ head-assembly-guide.md          # <-- THIS STORY
â”œâ”€â”€ bom/
â”‚   â””â”€â”€ epic3_bom.csv                   # <-- THIS STORY
â””â”€â”€ wiring/
    â”œâ”€â”€ head-module-pcb-diagram.png     # <-- THIS STORY
    â”œâ”€â”€ ears-servo-wiring.png           # <-- THIS STORY
    â”œâ”€â”€ neck-gimbal-wiring.png          # <-- THIS STORY
    â””â”€â”€ full-head-i2c-diagram.png       # <-- THIS STORY

firmware/
â”œâ”€â”€ head/
â”‚   â””â”€â”€ README.md                       # <-- THIS STORY (update)
â””â”€â”€ ears_neck/
    â””â”€â”€ README.md                       # <-- THIS STORY (new)

ros2/src/orchestrator/
â””â”€â”€ ros2_nodes/
    â””â”€â”€ README.md                       # <-- THIS STORY (update)

media/
â”œâ”€â”€ epic3/
â”‚   â”œâ”€â”€ photos/
â”‚   â”‚   â”œâ”€â”€ assembly_timelapse_*.jpg
â”‚   â”‚   â”œâ”€â”€ complete_assembly_*.jpg
â”‚   â”‚   â””â”€â”€ expressions_*.jpg
â”‚   â””â”€â”€ videos/
â”‚       â”œâ”€â”€ assembly_timelapse.mp4
â”‚       â”œâ”€â”€ emotion_demo.mp4
â”‚       â”œâ”€â”€ presence_detection.mp4
â”‚       â””â”€â”€ gesture_showcase.mp4
```

## Dev Agent Record

### Agent Model Used
<!-- To be filled by dev agent -->

### Debug Log References
<!-- To be filled by dev agent -->

### Completion Notes List
<!-- To be filled by dev agent -->

### File List
<!-- To be filled by dev agent -->

## QA Results
<!-- To be filled by QA agent -->

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-08 | v1.0 | Initial story creation from Epic 3 | Sarah (Product Owner) |
